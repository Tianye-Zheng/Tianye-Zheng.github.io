---
layout: post
title:  "项目"
date:   2019-11-14
desc: ""
keywords: ""
categories: [Java]
tags: []
icon: icon-html
---
项目的小备忘录

`账号设置`
<br />
### 想问下老师，controller中的 return “redirect:/index" 和  return “site/index" ，有什么区别呢？

return “/site/index”是返回一个模板路径，本次请求没有处理完，DispatcherServlet会将Model中的数据和对应的模板提交给模板引擎，让它继续处理完这次请求。return "redirect:/index"是重定向，表示本次请求已经处理完毕，但是没有什么合适的数据展现给客户端，建议客户端再发一次请求，访问"/index"以获得合适的数据。

kafka

手动指定 kafka 安装目录下的 data 文件储存数据

由于 kafka 依赖于 zookeeper，先启动 zookeeper，并指定配置文件

./zookeeper-server-start.sh ../config/zookeeper.propertiees

再启动 kafka 服务器，并指定配置文件：

./kafka-server-start.sh ../config/server.properties

创建名为 comment 的主题

./kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic comment

查看主题

./kafka-topics.sh --list --bootstrap-server localhost:9092

关于Kafka使用的重要提示

现象：在windows的命令行里启动kafka之后，当关闭命令行窗口时，就会强制关闭kafka。这种关闭方式为暴力关闭，很可能会导致kafka无法完成对日志文件的解锁。届时，再次启动kafka的时候，就会提示日志文件被锁，无法成功启动。

方案：将kafka的日志文件全部删除，再次启动即可。

建议：不要暴力关闭kafka，建议通过在命令行执行kafka-server-stop命令来关闭它。

其他：将来在Linux上部署kafka之后，采用后台运行的方式，就会避免这样的问题。


Elastic Search

启动ES的服务器：运行bin目录下的 elasticsearch 文件

查看健康状态： curl -X GET "localhost:9200/_cat/health?v"

查看节点状态： curl -X GET "localhost:9200/_cat/nodes?v"

查看索引：curl -X GET "localhost:9200/_cat/indices?v"

创建索引，名为 test：curl -X PUT "localhost:9200/test"

删除索引：curl -X DELETE "localhost:9200/test"


ES在启动时，默认申请1g内存，在学习阶段，这太耗内存了，可以调小一点。大家可以修改其 config 目录下的 jvm.options 文件，将初识内存调整为256m，将最大内存调整为512m


Spring Security

Spring Security 是一个专注为 Java 应用程序提供身份认证和授权的框架，它的强大之处在于它可以轻松扩展以满足自定义的需求

生成长图功能

使用了小工具 wkhtmltopdf/wkhtmltoimages ，安装在 /usr/local/bin 目录下

将特定网站内容生成为 pdf 文件或者图片

`wkhtmltopdf https://www.nowcoder.com /Users/zhengtianye/Desktop/data/wk-pdfs/1.pdf`

`wkhtmltoimage --quality 75 https://www.baidu.com /Users/zhengtianye/Desktop/data/wk-images/1.png`

（ 压缩程度为 75% ）