---
layout: post
title:  "计网笔记3-网络层"
date:   2020-07-31
desc: ""
keywords: ""
categories: [杂项]
tags: [计算机网络]
icon: icon-html
---
整理自B站王道考研视频

<br />

## 网络层的功能

网络层的主要任务是把 `分组` 从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层传输单位是 `数据报`

功能一：路由选择与分组转发（最佳路径）

功能二：异构网络互联（手机、PC、校园网、WiFi，通过`路由器`互联）

功能三：拥塞控制（way1：开环控制；way2：闭环控制）

路由器：将大量主机联系在一起的一个交换设备

<br />
## 数据交换方式

### 电路交换

eg. 电话网络 优点：通信时延小，有序传播，没有冲突，实时性强 ；缺点：建立连接时间长，线路独占，使用效率低，灵活性差，无差错控制能力

### 报文交换

`报文` ：源应用发送的信息整体（eg. 一整个pdf文件）

优点：无需建立连接，存储转发，动态分配线路，线路可靠性较高，线路利用率较高，多目标服务

缺点：有存储转发时延，报文大小不定，需要网络节点有较大缓存空间

### 分组交换：数据报方式、虚电路方式

`分组` ：把大的数据块分割成小的数据块

优点：具有报文交换的优点，同时相对于报文交换，存储管理更容易

缺点：有存储转发时延，需要传输额外的信息量，乱序到达目的主机时，要对分组排序重组

三种数据交换方式比较总结
<br />
<div align="center"><img src="https://raw.githubusercontent.com/Tianye-Zheng/Tianye-Zheng.github.io/master/PostPictures/2020-summer/16.png" width = "500" height =
"500" /></div>
<br />

1. 报文交换和分组交换都采用存储转发
2. 传送数据量大，且传送时间远大于呼叫时，选择电路交换。电路交换传输时延最小
3. 从信道利用率看，报文交换和分组交换优于电路交换，其中分组交换时延更小

——————

`数据报方式` 为网络层提供**无连接服务**，无连接服务：不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同。

`虚电路方式` 为网络层提供**连接服务**，连接服务：首先为分组的传输确定传输路径（建立连接），然后沿该路径（连接）传输系列分组，系列分组传输路径相同，传输结束后拆除连接。（结合了分组交换和电路交换的优点）

几种传输单元名词辨析
<br />
<div align="center"><img src="https://raw.githubusercontent.com/Tianye-Zheng/Tianye-Zheng.github.io/master/PostPictures/2020-summer/17.png" width = "200" height =
"200" /></div>
<br />

`虚电路` ： 一条源主机到目的主机类似于电路的路径（**逻辑连接**），路径上所有结点都要维持这条虚电路的建立，都维持一张虚电路表，每一项记录了一个打开的虚电路的信息。

<br />
<div align="center"><img src="https://raw.githubusercontent.com/Tianye-Zheng/Tianye-Zheng.github.io/master/PostPictures/2020-summer/18.png" width = "500" height =
"400" /></div>
<br />

<br />
## IP数据报

IP 数据报格式：

<br />
<div align="center"><img src="https://raw.githubusercontent.com/Tianye-Zheng/Tianye-Zheng.github.io/master/PostPictures/2020-summer/19.png" width = "500" height =
"400" /></div>
<br />

`标识`：同一数据报的分片使用同一标识

`标志`：只有 2 位有意义 x _ _

`中间位 DF （Don't Fragment）` DF=1，禁止分片，DF=0，允许分片

`最低位 MF （More Fragment）` MF=1，后面“还有分片”，MF=0，代表最后一片/没分片

`片偏移`：指出较长分组分片后，某片在原分组中的相对位置。以 **8B** 为单位 => 除了最后一个分片，每个分片长度一定是**8B的整数倍**

总长度单位是 1B，片偏移单位是 8B，首部长度单位是 4B

**特殊 IP 地址**：

<br />
<div align="center"><img src="https://raw.githubusercontent.com/Tianye-Zheng/Tianye-Zheng.github.io/master/PostPictures/2020-summer/20.png" width = "500" height =
"400" /></div>
<br />

**私有 IP 地址**：

<br />
<div align="center"><img src="https://raw.githubusercontent.com/Tianye-Zheng/Tianye-Zheng.github.io/master/PostPictures/2020-summer/21.png" width = "500" height =
"400" /></div>
<br />